{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\game.js"],"names":["XMLHTTP","require","window","Global","preIssue","issue","servertime","endtime","lotteryTime","is_balance","fengpan","timing","cc","Class","extends","Component","properties","xhr","default","type","userIdtxt","Label","userCointxt","kjAudio","AudioSource","longBetbtn","Button","huBetbtn","heBetbtn","confirmBetbtn","deskTexture","Node","longOadd","huOadd","heOadd","goldiconBox","iconBases","balanceState","balancedState","longLable","huLable","heLable","tanKuangNode","displayBoard","isLoading","resetBtn","lblNotice","onLoad","userCookie","sys","localStorage","getItem","director","loadScene","game","on","EVENT_HIDE","log","bind","EVENT_SHOW","getNextIssue","systemEvent","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","userloginInfo","JSON","parse","quitgame","getOdds","getHistory","userInfo","schedule","topInfo","onDestroy","off","event","keyCode","KEY","back","end","active","getChildByName","getComponent","string","Animation","play","scheduleOnce","update","dt","x","node","width","httpFail","res","tankuang","find","tankuangtxt","getServiceResult","xmlHttpGet","setNotice","header","webCloseServiceResult","setkjInfo","fn","count","showTrend","showOdds","preNum","kjqishu","numArr","split","childnode","children","i","length","_name","jjkjqishu","issuestr","uid","yazhulog","yazhuarr","longzhu","huzhu","hezhu","Date","getTime","serverTime","parseInt","checkDrawed","activateBetbtn","trendicons","childs","l","destroy","longicon","huicon","heicon","iconObj","iconItem","instantiate","addChild","userinfo","utype","coin","xmlHttpPost","changeUserinfo","nowtime","Betdifftime","Drawdifftime","Betformattime","difftime","Drawformattime","BetLable","DrawLable","getBetTimeStr","getDrawTimeStr","kaijiangAudio","kjfun","banBetbtn","settleAccounts","unschedule","clearGoldsprite","nums","a","day","Math","floor","hour","minute","second","fftime","Number","creatOthergold","interactable","b","lot_lang","dec_s21","balance","setItem","stringify","coinlable","nodes","index","startMoveAt","jiange","ix","round","random","deskchild","goldbox","stakebg","goldboxchild","idx","icons"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["const XMLHTTP=require(\"XMLHTTP\");\r\nwindow.Global = {preIssue:'',issue:'',servertime:null,endtime:null,lotteryTime:null,is_balance:false,fengpan:false,timing:false};\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        xhr:{\r\n            default: null,\r\n            type: XMLHTTP\r\n        },\r\n        userIdtxt:cc.Label,\r\n        userCointxt:cc.Label,\r\n        kjAudio:{\r\n            default:null,\r\n            type:cc.AudioSource\r\n        },\r\n        longBetbtn:{\r\n            default:null,\r\n            type:cc.Button\r\n        },\r\n        huBetbtn:{\r\n            default:null,\r\n            type:cc.Button\r\n        },\r\n        heBetbtn:{\r\n            default:null,\r\n            type:cc.Button\r\n        },\r\n        confirmBetbtn:{\r\n            default:null,\r\n            type:cc.Button\r\n        },\r\n        deskTexture:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        longOadd:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        huOadd:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        heOadd:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        goldiconBox:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        iconBases:{\r\n            default:[],\r\n            type:[cc.Node]\r\n        },\r\n        balanceState:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        balancedState:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        longLable:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        huLable:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        heLable:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        tanKuangNode:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        displayBoard:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        isLoading:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        resetBtn:{\r\n            default:null,\r\n            type:cc.Button\r\n        },\r\n        lblNotice:cc.Label\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        \r\n        this.userCookie=cc.sys.localStorage.getItem(\"userCookie\");\r\n        if(!this.userCookie)\r\n        {\r\n            cc.director.loadScene(\"Startgame\");\r\n        }\r\n        cc.game.on(cc.game.EVENT_HIDE,function(){\r\n            cc.log(\"游戏进入后台\");\r\n        }.bind(this));\r\n        \r\n        cc.game.on(cc.game.EVENT_SHOW,this.getNextIssue.bind(this));\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        this.userloginInfo=JSON.parse(cc.sys.localStorage.getItem(\"userinfo\"));\r\n        this.quitgame=0;//大于等于2则退出游戏程序 \r\n        this.getNextIssue();\r\n        this.getOdds();\r\n        this.getHistory();\r\n        this.userInfo();//获取用户信息\r\n        this.schedule(function(){this.topInfo();},1);\r\n    },\r\n    onDestroy () {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    },\r\n    onKeyDown: function (event) {\r\n        switch(event.keyCode) {\r\n            case cc.KEY.back:\r\n                this.quitgame++;\r\n                break;\r\n        }\r\n    },\r\n    onKeyUp: function (event) {\r\n        switch(event.keyCode) {\r\n            case cc.KEY.back:\r\n                if(this.quitgame>=2)\r\n                {\r\n                    cc.director.end();\r\n                }\r\n                else\r\n                {\r\n                    if(!this.tanKuangNode.active)\r\n                    {\r\n                        this.tanKuangNode.active=true;\r\n                    }\r\n                    this.tanKuangNode.getChildByName(\"msgtxt\").getComponent(cc.Label).string=\"再按一次退出游戏\";\r\n                    this.tanKuangNode.getComponent(cc.Animation).play();\r\n                    this.scheduleOnce(function(){this.quitgame=0},1);\r\n                }\r\n                break;\r\n        }\r\n    },\r\n    //start () {},\r\n    update (dt) {\r\n        var x = this.lblNotice.node.x;\r\n        x -= dt*100;\r\n        if(x + this.lblNotice.node.width < -800){\r\n            x = 500;\r\n        }\r\n        this.lblNotice.node.x = x;\r\n    },\r\n    //lateUpdate(){},\r\n    //访问失败提示\r\n    httpFail:function(res){\r\n        var tankuang=cc.find(\"Canvas/tankuangbg\");\r\n        var tankuangtxt=cc.find(\"Canvas/tankuangbg/msgtxt\").getComponent(cc.Label);\r\n        if(!tankuang.active)\r\n        {\r\n            tankuang.active=true;\r\n            tankuangtxt.string=res;\r\n            tankuang.getComponent(cc.Animation).play();\r\n        }\r\n    },\r\n    //获取公告信息\r\n    getServiceResult:function(){\r\n        this.xhr.xmlHttpGet(\"config/config.js\",'',this.userCookie,this.setNotice.bind(this),this.httpFail);\r\n    },\r\n    setNotice:function(res,header){\r\n        this.lblNotice.string=res.webCloseServiceResult;\r\n    },\r\n    //获取头部显示信息\r\n    getNextIssue:function(){\r\n        //cc.log('离开后台');\r\n        this.isLoading.string=0;\r\n        if(!this.displayBoard.active)\r\n        {\r\n            this.displayBoard.active=true;\r\n        }\r\n        if(!this.tanKuangNode.active)\r\n        {\r\n            this.tanKuangNode.active=true;\r\n        }\r\n        this.getServiceResult();\r\n        this.tanKuangNode.getChildByName(\"msgtxt\").getComponent(cc.Label).string=\"正在请求数据……\";\r\n        this.xhr.xmlHttpGet(\"static/data/NextIssue.js\",'',this.userCookie,this.setkjInfo.bind(this),this.httpFail);\r\n        this.scheduleOnce(this.fn,5);\r\n    },\r\n    fn:function(){\r\n        if(this.isLoading.string==0)\r\n        {\r\n            cc.log('再次请求');\r\n            this.getNextIssue();\r\n        }\r\n    },\r\n    //获取最新的10条记录\r\n    getHistory:function(){\r\n        this.xhr.xmlHttpGet(\"game/getHistory.do\",{count:10},this.userCookie,this.showTrend,this.httpFail);\r\n    },\r\n    //获取玩法赔率\r\n    getOdds:function(){\r\n        this.xhr.xmlHttpGet(\"game/getPlayeds\",'',this.userCookie,this.showOdds.bind(this),this.httpFail);\r\n    },\r\n    //显示赔率\r\n    showOdds:function(res,header){\r\n        if(res)\r\n        {\r\n            this.longOadd.string='x'+res['LONG']['odds'];\r\n            this.huOadd.string='x'+res['HU']['odds'];\r\n            this.heOadd.string='x'+res['TOTAL']['odds'];\r\n        }\r\n    },\r\n    setkjInfo:function(res,header){\r\n        if(res.preNum)\r\n        {\r\n            this.isLoading.string=1;\r\n            if(this.tanKuangNode.active)\r\n            {\r\n                this.tanKuangNode.active=false;\r\n            }\r\n            if(this.displayBoard.active)\r\n            {\r\n                this.displayBoard.active=false;\r\n            }\r\n            //前一期\r\n            var kjqishu=cc.find(\"Canvas/game/top/lotteryinfo/kjqishu\").getComponent(cc.Label);\r\n            kjqishu.string=res.preIssue+\"期开奖\";\r\n            //将开奖号码分成数组\r\n            var numArr=res.preNum.split(\",\");\r\n            //获取组件数组\r\n            var childnode=cc.find(\"Canvas/game/top/lotteryinfo\").children;\r\n            for (var i = 0; i < childnode.length; i++) {\r\n                if (childnode[i]._name === \"lotterynumbers\")\r\n                {\r\n                    childnode[i].getChildByName(\"number\").getComponent(cc.Label).string=numArr[i-1];\r\n                }  \r\n            }\r\n            //本期\r\n            var jjkjqishu=cc.find(\"Canvas/game/top/lotteryinfo/jjkjqishu\").getComponent(cc.Label);\r\n            jjkjqishu.string=res.issue+\"期\";\r\n            var issuestr=res.issue+this.userloginInfo.uid;\r\n            var yazhulog=cc.sys.localStorage.getItem(issuestr);//重新登录后获取当前已经押注的记录\r\n            if(yazhulog)\r\n            {\r\n                var yazhuarr=JSON.parse(yazhulog);\r\n                this.longLable.string='下注：'+yazhuarr.longzhu;\r\n                this.huLable.string='下注：'+yazhuarr.huzhu;\r\n                this.heLable.string='下注：'+yazhuarr.hezhu;\r\n                //cc.sys.localStorage.setItem(issuestr,'');\r\n            }\r\n            Global.issue=res.issue;\r\n            Global.preIssue=res.preIssue;\r\n            Global.endtime=new Date(res.endtime).getTime();\r\n            Global.lotteryTime=new Date(res.lotteryTime).getTime();\r\n            Global.servertime=new Date(res.serverTime).getTime();\r\n            Global.timing=true;//获取数据成功倒计时开始\r\n            cc.log(\"开始倒计时\");\r\n            if(Global.issue!=''&&Global.preIssue!='')\r\n            {\r\n                if(parseInt(Global.issue)-parseInt(Global.preIssue)>1)\r\n                {\r\n                    this.checkDrawed();\r\n                }\r\n                else\r\n                {\r\n                    this.activateBetbtn();//结算后才可以继续投注\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            this.isLoading.string=0;\r\n        }\r\n    },\r\n    showTrend:function(res,header){\r\n        if(res.length>0)\r\n        {\r\n            var trendicons=cc.find(\"Canvas/game/bottom/trendbox/trendicons\");\r\n            var childs=trendicons.children;\r\n            for(var l=0;l<childs.length;l++)\r\n            {\r\n                if(l>2)\r\n                {\r\n                    childs[l].destroy();\r\n                }\r\n            }\r\n            var longicon=trendicons.getChildByName(\"longicon\");\r\n            var huicon=trendicons.getChildByName(\"huicon\");\r\n            var heicon=trendicons.getChildByName(\"heicon\");\r\n            for(var i=0;i<10;i++)\r\n            {\r\n                var iconObj=res[i]['n1']>res[i]['n5']?longicon:(res[i]['n1']<res[i]['n5']?huicon:heicon);\r\n                var iconItem=cc.instantiate(iconObj);\r\n                iconItem.active=true;\r\n                trendicons.addChild(iconItem);\r\n            }\r\n        }\r\n        \r\n    },\r\n    //获取用户信息\r\n    userInfo:function(){\r\n        var userinfo=JSON.parse(cc.sys.localStorage.getItem(\"userinfo\"));\r\n        this.userIdtxt.string=userinfo.utype>0?\"ID:\"+userinfo.uid:\"游客\";\r\n        this.userCointxt.string=\"$\"+userinfo.coin;\r\n        //每10秒获得一次用户金币信息\r\n        this.schedule(function(){\r\n            this.xhr.xmlHttpPost(\"game/getUserMsg.do\",'',this.userCookie,this.changeUserinfo,this.httpFail);\r\n        },30);\r\n    },\r\n    topInfo:function(){\r\n        \r\n        if(Global.endtime&&Global.lotteryTime&&Global.timing)\r\n        {\r\n            var endtime=Global.endtime;\r\n            var lotteryTime=Global.lotteryTime;\r\n            if(Global.servertime!=null)\r\n            {\r\n                var nowtime=Global.servertime;\r\n                Global.servertime=Global.servertime+1000;\r\n                var Betdifftime=(endtime-nowtime)/1000;//封盘时间差\r\n                var Drawdifftime=(lotteryTime-nowtime)/1000;//开奖时间差\r\n                var Betformattime=this.difftime(Betdifftime);\r\n                var Drawformattime=this.difftime(Drawdifftime);\r\n                var BetLable=cc.find(\"Canvas/game/top/lotteryinfo/Sealing\").getComponent(cc.Label);//封盘时间\r\n                var DrawLable=cc.find(\"Canvas/game/top/lotteryinfo/draw\").getComponent(cc.Label);//开奖时间\r\n                BetLable.string=\"封盘：\"+this.getBetTimeStr(Betformattime);\r\n    \r\n                DrawLable.string=\"开奖：\"+this.getDrawTimeStr(Drawformattime);\r\n                var kaijiangAudio=cc.find(\"Canvas/kaijiangAudio\").getComponent(cc.AudioSource);//开奖铃声\r\n                if(Drawdifftime<=0)\r\n                {\r\n                    Global.timing=false;//暂停倒计时\r\n                    cc.log(\"停止倒计时\");\r\n                    this.getNextIssue();\r\n                    Global.fengpan=false;\r\n                }\r\n            }  \r\n        }\r\n    },\r\n    //检测是否已经开奖结算\r\n    checkDrawed:function(){\r\n        this.schedule(this.kjfun,2);\r\n    },\r\n    kjfun:function(){\r\n        if(!Global.is_balance)\r\n        {\r\n            this.balanceState.active=true;\r\n            this.banBetbtn();\r\n            this.xhr.xmlHttpGet(\"static/data/CurIssue.js\",'',this.userCookie,this.settleAccounts.bind(this),this.httpFail);\r\n        }\r\n        else\r\n        {\r\n            Global.is_balance=false;\r\n            this.unschedule(this.kjfun);\r\n            this.kjAudio.getComponent(cc.AudioSource).play();\r\n            this.getHistory();\r\n            this.balanceState.active=false;\r\n            if(!this.balancedState.active)\r\n            {\r\n                this.balancedState.active=true;\r\n                this.balancedState.getComponent(cc.Animation).play();\r\n            }\r\n            this.clearGoldsprite();//清除桌面之前的投注\r\n            this.activateBetbtn();//结算后才可以继续投注\r\n            //修改用户金币信息\r\n            this.xhr.xmlHttpPost(\"game/getUserMsg.do\",'',this.userCookie,this.changeUserinfo,this.httpFail);\r\n        }\r\n    },\r\n    settleAccounts:function(res,header){\r\n        if(res)\r\n        {\r\n            if(res.issue==(parseInt(Global.issue)-1))\r\n            {\r\n                Global.is_balance=true;\r\n                //前一期\r\n                var kjqishu=cc.find(\"Canvas/game/top/lotteryinfo/kjqishu\").getComponent(cc.Label);\r\n                kjqishu.string=res.issue+\"期开奖\";\r\n                //将开奖号码分成数组\r\n                var numArr=res.nums.split(\",\");\r\n                //获取组件数组\r\n                var childnode=cc.find(\"Canvas/game/top/lotteryinfo\").children;\r\n                for (var i = 0; i < childnode.length; i++) {\r\n                    if (childnode[i]._name === \"lotterynumbers\")\r\n                    {\r\n                        childnode[i].getChildByName(\"number\").getComponent(cc.Label).string=numArr[i-1];\r\n                    }  \r\n                }\r\n                \r\n            }\r\n        }\r\n    },\r\n    //格式化时间差\r\n    difftime:function(a){\r\n        return a > 0 ? {\r\n            day: Math.floor(a / 86400),\r\n            hour: Math.floor(a % 86400 / 3600),\r\n            minute: Math.floor(a % 3600 / 60),\r\n            second: Math.floor(a % 60)\r\n        } : {\r\n            day: 0,\r\n            hour: 0,\r\n            minute: 0,\r\n            second: 0\r\n        }\r\n    },\r\n    //格式化分秒\r\n    fftime:function(a){\r\n        return Number(a) < 10 ? \"\" + 0 + Number(a) : Number(a)\r\n    },\r\n    //禁用投注按钮和机器人投币\r\n    banBetbtn:function(){\r\n        this.unschedule(this.creatOthergold);\r\n        if(this.longBetbtn.interactable)\r\n        this.longBetbtn.interactable=false;\r\n        if(this.huBetbtn.interactable)\r\n        this.huBetbtn.interactable=false;\r\n        if(this.heBetbtn.interactable)\r\n        this.heBetbtn.interactable=false;\r\n        if(this.confirmBetbtn.interactable)\r\n        this.confirmBetbtn.interactable=false;\r\n        if(this.resetBtn.interactable)\r\n        this.resetBtn.interactable=false;\r\n    },\r\n    //激活投注按钮\r\n    activateBetbtn:function(){\r\n        \r\n        if(!this.longBetbtn.interactable)\r\n        this.longBetbtn.interactable=true;\r\n        if(!this.huBetbtn.interactable)\r\n        this.huBetbtn.interactable=true;\r\n        if(!this.heBetbtn.interactable)\r\n        this.heBetbtn.interactable=true;\r\n        if(!this.confirmBetbtn.interactable)\r\n        this.confirmBetbtn.interactable=true;\r\n        if(!this.resetBtn.interactable)\r\n        {\r\n            this.resetBtn.interactable=true;\r\n        }\r\n        this.schedule(this.creatOthergold,1);//制造随机间隔投币效果\r\n    },\r\n    //显示到前端封盘倒计时时间格式\r\n    getBetTimeStr:function(a){\r\n        if (!a) {\r\n            this.banBetbtn();\r\n            Global.fengpan=true;\r\n            return \"已封盘\" \r\n        }\r\n        var b = \"\" + (a.day > 0 ? a.day + \"天\" : \"\") + (a.hour > 0 ? this.fftime(a.hour) + \":\" : \"\") + this.fftime(a.minute) + \":\" + this.fftime(a.second);\r\n        if (b == \"00:00\") {\r\n            this.banBetbtn();\r\n            Global.fengpan=true;\r\n            return \"已封盘\"\r\n        }\r\n        return b\r\n    },\r\n    //显示到前端开奖倒计时时间格式\r\n    getDrawTimeStr:function(b){\r\n        if (!b) {\r\n            this.banBetbtn();\r\n            return \"已结束\"\r\n        }\r\n        var a = \"\" + (b.day > 0 ? b.day + (lot_lang.dec_s21) + \" \" : \"\") + (b.hour > 0 ? this.fftime(b.hour) + \":\" : \"\") + this.fftime(b.minute) + \":\" + this.fftime(b.second);\r\n        if (a == \"00:00\") {\r\n            this.banBetbtn();\r\n            return \"已结束\"\r\n        }\r\n        return a\r\n    },\r\n    changeUserinfo:function(res,header){\r\n        if(res.balance)\r\n        {\r\n            var userinfo=JSON.parse(cc.sys.localStorage.getItem(\"userinfo\"));\r\n            userinfo.coin=res.balance;\r\n            cc.sys.localStorage.setItem(\"userinfo\",JSON.stringify(userinfo));\r\n            var coinlable=cc.find(\"Canvas/game/bottom/botbg/userinfo/usercoin/usercointxt\").getComponent(cc.Label);\r\n            coinlable.string=\"$\"+res.balance;\r\n        }\r\n    },\r\n    //创建系统的金币投放效果\r\n    creatOthergold:function(){\r\n        var nodes=this.iconBases;\r\n        for (let index = 0; index < nodes.length; index++) {\r\n            if(!nodes[index].active)\r\n            {\r\n                nodes[index].active=true;\r\n            }\r\n            nodes[index].getComponent(\"putInIcons\").startMoveAt();\r\n        }\r\n        \r\n        this.unschedule(this.creatOthergold);//取消计时\r\n        var jiange=[5,10,15,20,25];//随机时间间隔\r\n        var ix=Math.round(Math.random()*4);\r\n        this.schedule(this.creatOthergold,jiange[ix]);//重新生成计时器\r\n        \r\n    },\r\n    //清空桌面金币\r\n    clearGoldsprite:function(){\r\n        //用户自己的下注金币\r\n        var deskchild=this.deskTexture.children;\r\n        for(var i=0;i<deskchild.length;i++)\r\n        {\r\n            var goldbox=deskchild[i].getChildByName(\"goldbox\");\r\n            var stakebg=deskchild[i].getChildByName(\"stakebg\");\r\n            stakebg.getChildByName(\"staketxt\").getComponent(cc.Label).string=\"下注：0\";\r\n            var goldboxchild=goldbox.children;\r\n            if(goldboxchild.length>0)\r\n            {\r\n                for (let idx = 0; idx < goldboxchild.length; idx++) {\r\n                    goldboxchild[idx].destroy();\r\n                }\r\n            }\r\n        }\r\n        //其他人的下注金币\r\n        var icons=this.goldiconBox.children;\r\n        for (let index = 0; index < icons.length; index++) {\r\n            icons[index].destroy();\r\n        }\r\n    }\r\n});\r\n"]}